<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ward - Identity Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/argon2-browser/1.18.0/argon2-bundled.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <style>
        
    </style>
</head>
<body class="text-white cyber-grid">
    <div class="cyber-border border-b border-white/20 bg-black px-4 py-2">
        <div class="flex flex-col sm:flex-row items-center justify-between gap-2">
            <div class="flex items-center space-x-4 sm:space-x-8 w-full sm:w-auto">
                <h1 class="text-xl sm:text-2xl font-bold tracking-wider">WARD</h1>
                <div class="flex space-x-1">
                    <button class="navbar-item px-2 sm:px-4 py-1" onclick="importFile()">
                        <span class="text-xs sm:text-sm uppercase tracking-wider">Import</span>
                    </button>
                    <button class="navbar-item px-2 sm:px-4 py-1" onclick="exportFile()">
                        <span class="text-xs sm:text-sm uppercase tracking-wider">Export</span>
                    </button>
                    <button class="navbar-item px-2 sm:px-4 py-1" onclick="exportAsCSV()">
                        <span class="text-xs sm:text-sm uppercase tracking-wider">CSV</span>
                    </button>
                    <button class="navbar-item px-2 sm:px-4 py-1" onclick="copyAsText()">
                        <span class="text-xs sm:text-sm uppercase tracking-wider">Copy</span>
                    </button>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button onclick="showHelpModal()" class="text-white/50 hover:text-white transition-colors" title="Help">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </button>
                <div id="unsaved-warning" class="hidden flex items-center space-x-2 text-red-500 unsaved-indicator">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-xs uppercase tracking-wider hidden sm:inline">Unsaved</span>
                </div>
            </div>
        </div>
    </div>

    <div class="flex border-b border-white/20 bg-black/80 overflow-x-auto">
        <div id="tabs-container" class="flex">
            </div>
        <button onclick="showNewEntityModal()" class="px-4 py-2 hover:bg-white/10 transition-colors border-l border-white/20">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
        </button>
    </div>

    <div id="content-container" class="p-4 sm:p-6">
        <div class="max-w-4xl mx-auto mt-10" id="welcome-message">
            <div class="cyber-border rounded-lg text-center p-8 sm:p-12 fade-in">
                <h2 class="text-4xl sm:text-6xl font-bold tracking-widest">WARD</h2>
                <p class="text-base sm:text-lg text-white/70 mt-2 uppercase tracking-wider">Identity Management System</p>

                <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-8 text-left">
                    <div class="cyber-border p-6 rounded-lg">
                        <div class="flex items-center mb-3">
                            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                            <h3 class="text-lg sm:text-xl font-semibold uppercase tracking-wider">Personal Identity</h3>
                        </div>
                        <p class="text-white/60 text-sm">Generate complete personal profiles with AI photos, addresses, interests, and linguistic patterns.</p>
                    </div>

                    <div class="cyber-border p-6 rounded-lg">
                        <div class="flex items-center mb-3">
                            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                            </svg>
                            <h3 class="text-lg sm:text-xl font-semibold uppercase tracking-wider">Content Page</h3>
                        </div>
                        <p class="text-white/60 text-sm">Create themed content pages for fan accounts, meme pages, or brand personas.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="help-modal" class="fixed inset-0 modal-backdrop flex items-center justify-center z-50 hidden p-4">
        <div class="cyber-border rounded-lg p-6 w-full max-w-[600px] max-h-[80vh] overflow-y-auto">
            <h3 class="text-xl font-bold mb-6 uppercase tracking-wider">About WARD</h3>
            <div class="space-y-4 text-sm">
                <div>
                    <h4 class="font-bold uppercase tracking-wider text-white/70 mb-2">Features</h4>
                    <ul class="space-y-1 text-white/90">
                        <li>• Personal identities with full profiles</li>
                        <li>• Content page personas for social media</li>
                        <li>• AI-generated profile photos</li>
                        <li>• Password & 2FA management</li>
                        <li>• Export to CSV or text summary</li>
                        <li>• Full profile editing capabilities</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold uppercase tracking-wider text-white/70 mb-2">Keyboard Shortcuts</h4>
                    <ul class="space-y-1 text-white/90 font-mono">
                        <li>Ctrl+N - New entity</li>
                        <li>Ctrl+S - Export file</li>
                        <li>Ctrl+O - Import file</li>
                        <li>Ctrl+E - Export CSV</li>
                        <li>Ctrl+Shift+C - Copy as text</li>
                        <li>ESC - Close modals</li>
                    </ul>
                </div>
            </div>
            <div class="flex justify-end mt-6">
                <button onclick="closeHelpModal()" class="mono-button px-4 py-2 rounded">CLOSE</button>
            </div>
        </div>
    </div>

    <div id="new-entity-modal" class="fixed inset-0 modal-backdrop flex items-center justify-center z-50 hidden p-4">
        <div class="cyber-border rounded-lg p-6 w-full max-w-[700px] max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-bold mb-6 uppercase tracking-wider">Create New Entity</h3>
            
            <div class="entity-type-selector mb-6">
                <div class="entity-card" onclick="selectEntityType('person')">
                    <div class="text-center">
                        <svg class="w-12 h-12 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        <h4 class="font-bold uppercase mb-2">Personal Identity</h4>
                        <p class="text-xs text-white/60">Complete human profile with demographics, interests, and behaviors</p>
                    </div>
                </div>
                
                <div class="entity-card" onclick="selectEntityType('content')">
                    <div class="text-center">
                        <svg class="w-12 h-12 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <h4 class="font-bold uppercase mb-2">Content Page</h4>
                        <p class="text-xs text-white/60">Theme-based page for memes, fans, or brand content</p>
                    </div>
                </div>
            </div>
            
            <div id="preview-content" class="space-y-4 mb-6 hidden">
                </div>
            
            <div class="flex justify-end space-x-3">
                <button id="regenerate-btn" onclick="regeneratePreview()" class="mono-button-secondary px-4 py-2 rounded hidden">Regenerate</button>
                <button onclick="closeNewEntityModal()" class="mono-button-secondary px-4 py-2 rounded">Cancel</button>
                <button id="create-btn" onclick="confirmNewEntity()" class="mono-button px-4 py-2 rounded hidden">Create</button>
            </div>
        </div>
    </div>

    <div id="edit-field-modal" class="fixed inset-0 modal-backdrop flex items-center justify-center z-50 hidden p-4">
        <div class="cyber-border rounded-lg p-6 w-full max-w-[500px] max-h-[80vh] overflow-y-auto">
            <h3 id="edit-field-title" class="text-xl font-bold mb-4 uppercase tracking-wider">Edit Field</h3>
            <div id="edit-field-content">
                </div>
            <div class="flex justify-end space-x-3 mt-6">
                <button onclick="closeEditFieldModal()" class="mono-button-secondary px-4 py-2 rounded">Cancel</button>
                <button onclick="saveEditedField()" class="mono-button px-4 py-2 rounded">Save</button>
            </div>
        </div>
    </div>

    <div id="password-modal" class="fixed inset-0 modal-backdrop flex items-center justify-center z-50 hidden p-4">
        <div class="cyber-border rounded-lg p-6 w-full max-w-[400px]">
            <h3 class="text-xl font-bold mb-4 uppercase tracking-wider">Enter Password</h3>
            <input type="password" id="modal-password" class="mono-input w-full px-4 py-2 rounded text-white mb-4" placeholder="Password">
            <div class="flex justify-end space-x-3">
                <button onclick="closePasswordModal()" class="mono-button-secondary px-4 py-2 rounded">Cancel</button>
                <button onclick="confirmPassword()" class="mono-button px-4 py-2 rounded">Confirm</button>
            </div>
        </div>
    </div>

    <div id="add-password-modal" class="fixed inset-0 modal-backdrop flex items-center justify-center z-50 hidden p-4">
        <div class="cyber-border rounded-lg p-6 w-full max-w-[500px]">
            <h3 class="text-xl font-bold mb-4 uppercase tracking-wider">Add Password</h3>
            <div class="space-y-4">
                <div>
                    <label class="text-xs text-white/50 uppercase tracking-wider">Service</label>
                    <input type="text" id="password-service" class="mono-input w-full px-4 py-2 rounded text-white" placeholder="e.g., Gmail, Facebook">
                </div>
                <div>
                    <label class="text-xs text-white/50 uppercase tracking-wider">Username/Email</label>
                    <input type="text" id="password-username" class="mono-input w-full px-4 py-2 rounded text-white" placeholder="Username or email">
                </div>
                <div>
                    <label class="text-xs text-white/50 uppercase tracking-wider">Password</label>
                    <div class="flex space-x-2">
                        <input type="password" id="password-value" class="mono-input flex-1 px-4 py-2 rounded text-white" placeholder="Password">
                        <button onclick="generatePassword()" class="mono-button-secondary px-4 py-2 rounded">Gen</button>
                        <button onclick="togglePasswordVisibility()" class="mono-button-secondary px-4 py-2 rounded">
                            <svg id="password-eye" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="mt-2 flex space-x-1">
                        <div class="strength-bar flex-1" id="strength-1"></div>
                        <div class="strength-bar flex-1" id="strength-2"></div>
                        <div class="strength-bar flex-1" id="strength-3"></div>
                        <div class="strength-bar flex-1" id="strength-4"></div>
                        <div class="strength-bar flex-1" id="strength-5"></div>
                    </div>
                </div>
            </div>
            <div class="flex justify-end space-x-3 mt-6">
                <button onclick="closeAddPasswordModal()" class="mono-button-secondary px-4 py-2 rounded">Cancel</button>
                <button onclick="savePassword()" class="mono-button px-4 py-2 rounded">Save</button>
            </div>
        </div>
    </div>

    <div id="add-totp-modal" class="fixed inset-0 modal-backdrop flex items-center justify-center z-50 hidden p-4">
        <div class="cyber-border rounded-lg p-6 w-full max-w-[500px]">
            <h3 class="text-xl font-bold mb-4 uppercase tracking-wider">Add 2FA</h3>
            <div class="space-y-4">
                <div>
                    <label class="text-xs text-white/50 uppercase tracking-wider">Service Name</label>
                    <input type="text" id="totp-service" class="mono-input w-full px-4 py-2 rounded text-white" placeholder="e.g., Google, GitHub">
                </div>
                <div>
                    <label class="text-xs text-white/50 uppercase tracking-wider">Secret Key</label>
                    <input type="text" id="totp-secret" class="mono-input w-full px-4 py-2 rounded text-white" placeholder="Enter the secret key">
                </div>
            </div>
            <div class="flex justify-end space-x-3 mt-6">
                <button onclick="closeAddTOTPModal()" class="mono-button-secondary px-4 py-2 rounded">Cancel</button>
                <button onclick="saveTOTP()" class="mono-button px-4 py-2 rounded">Add</button>
            </div>
        </div>
    </div>

    <div id="export-modal" class="fixed inset-0 modal-backdrop flex items-center justify-center z-50 hidden p-4">
        <div class="cyber-border rounded-lg p-6 w-full max-w-[400px]">
            <h3 class="text-xl font-bold mb-4 uppercase tracking-wider">Export File</h3>
            <div class="space-y-4">
                <div>
                    <label class="text-xs text-white/50 uppercase tracking-wider">Filename</label>
                    <input type="text" id="export-filename" class="mono-input w-full px-4 py-2 rounded text-white" placeholder="aliases.ward" value="aliases.ward">
                </div>
            </div>
            <div class="flex justify-end space-x-3 mt-6">
                <button onclick="closeExportModal()" class="mono-button-secondary px-4 py-2 rounded">Cancel</button>
                <button onclick="confirmExport()" class="mono-button px-4 py-2 rounded">Export</button>
            </div>
        </div>
    </div>

    <div id="notification-container" class="fixed bottom-4 right-4 z-[200] space-y-2">
    </div>

    <input type="file" id="file-input" accept=".ward" class="hidden">

    <script src="js/app.js"></script>
</body>
</html>